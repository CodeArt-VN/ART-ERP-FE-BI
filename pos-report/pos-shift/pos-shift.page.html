<ion-header>
	<ion-toolbar>
		<ion-buttons slot="start" class="ion-hide-sm-down_">
			<ion-button color="dark" class="ion-hide-sm-down">
				Shifts Report
			</ion-button>
		</ion-buttons>
		<ion-buttons slot="end">
			<ion-button (click)="print()" title="{{'erp.app.pages.bi.sales-report.print' | translate}}">
				<ion-icon slot="icon-only" name="print"></ion-icon>
			</ion-button>
			
			<ion-button (click)="refresh()" title="{{'erp.app.pages.bi.sales-report.refresh' | translate}}">
				<ion-icon slot="icon-only" name="reload-outline"></ion-icon>
			</ion-button>
			
			<ion-button title="{{'erp.app.pages.bi.sales-report.show-feature' | translate}}" (click)="pageConfig.isShowFeature = !pageConfig.isShowFeature;">
				<ion-icon slot="icon-only" [name]="pageConfig.isShowFeature? 'close-outline':'list-circle-outline'">
				</ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-toolbar>

	<ion-toolbar style="--padding-start: 4px;" color="primary">
		<ion-segment scrollable="true" (ionChange)="segmentChanged($event)" [value]="segmentView">
			<ion-segment-button value="pos-shift/sale-saleman">
				<ion-label>{{'erp.app.pages.bi.sales-report.sale-saleman' | translate}}</ion-label>
			</ion-segment-button>
		</ion-segment>
	</ion-toolbar>
</ion-header>



<ion-content appScrollbarTheme appPrintFix class="A4" [ngClass]="{withFeature: pageConfig.isShowFeature}" forceOverscroll="false">
	<ion-fab *ngIf="pageConfig.isShowFeature" [ngClass]="{withSearch: pageConfig.isShowSearch}" class="feature no-print " vertical="top" horizontal="end" slot="fixed">
		<ion-list-header lines="inset">
			<ion-label color="dark">{{'erp.app.pages.bi.sales-report.sort-conditions' | translate}}</ion-label>
		</ion-list-header>
		<div class="ion-padding" style="padding-bottom: 0;">

			<div class="c-control">
				<label class="c-label">{{'erp.app.pages.bi.sales-report.time' | translate}} <br> ({{filter.fromDateTime}} - {{filter.toDateTime}})</label>

				<div class="date-pick">
          <input (change)="changeDateFillter('setdone')" class="datepicker" [(ngModel)]="filter.fromDateTime"required type="datetime-local" value=''>
          <input (change)="changeDateFillter('setdone')" class="datepicker" [(ngModel)]="filter.toDateTime" required type="datetime-local"  value=''>
				</div>
      </div>


			<div class="c-control">
				<label class="c-label" for="IDSaleman">{{'erp.app.pages.bi.sales-report.id-saleman' | translate}}</label>
				<ng-select [(ngModel)]="filter.saleman" class="c-input no-check-dirty" #IDSaleman labelForId="IDSaleman" [items]="salemanList$ | async" [typeahead]="salemanListInput$" [loading]='salemanListLoading' [virtualScroll]="true" bindLabel="FullName" placeholder="{{'erp.app.pages.bi.sales-report.search-placeholder' | translate}}">
					<ng-template ng-option-tmp let-i="item" let-search="searchTerm">
						<div *ngIf="i">
							<div><span [ngOptionHighlight]="search">{{i.FullName}}</span></div>
							<small>#<b><span class="important" [ngOptionHighlight]="search">{{i.Id}} - {{i.Code}}</span></b> <span *ngIf="i.Phone"> | {{'erp.app.pages.bi.sales-report.phone' | translate}}: <b [ngOptionHighlight]="search">{{i.Phone}}</b></span></small>
						</div>
					</ng-template>
				</ng-select>
			</div>

			<div class="c-control">
				<ion-button [disabled]="submitAttempt" color="primary" expand="block" (click)="runReports()"> {{'erp.app.pages.bi.sales-report.run-reports' | translate}}</ion-button> 
				<!-- shape="round" -->
			</div>

		</div>


	</ion-fab>
	<ion-router-outlet></ion-router-outlet>
</ion-content>