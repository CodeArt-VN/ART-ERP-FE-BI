<ion-header>
	<app-list-toolbar [pageConfig]="pageConfig" [selectedItems]="selectedItems" [query]="query" (add)="add()" (refresh)="refresh()" (export)="export()" (import)="import($event)" (help)="help()" (unselect)="unselect()" (archiveItems)="archiveItems()" (deleteItems)="deleteItems()" (changeBranch)="changeBranch($event)"></app-list-toolbar>
</ion-header>

<ion-content appScrollbarTheme class="scrollx" [ngClass]="{withFeature: pageConfig.isShowFeature}">
	<ion-fab *ngIf="pageConfig.isShowFeature" class="feature" vertical="top" horizontal="end" slot="fixed">
		<app-report-config [reportId]="reportConfig.Id" (runReport)="onRunReport($event)" (save)="onSave($event)"></app-report-config>
	</ion-fab>

	<ion-refresher [disabled]="!pageConfig.refresher" [disabled]="!pageConfig.refresher" slot="fixed" (ionRefresh)="refresh($event)">
		<ion-refresher-content></ion-refresher-content>
	</ion-refresher>

	<div style="max-width: 1440px;margin: auto;width: 100%;position: sticky;left: 0;">
		<div class="ion-padding" style="position: sticky; left: 0;">
			<app-page-title 
				[icon]="reportConfig.Icon" 
				[color]="reportConfig.Color"
				[title]="reportConfig.Name" 
				[remark]="reportConfig.Remark">
				<app-report-chart rightContent viewMode="full" 
				[reportId]="reportConfig.Id" [data]="runTestData" 
				(changeViewDimension)="onViewDimensionChange($event)"></app-report-chart>
			</app-page-title>
		</div>
	</div>

	<div style="max-width: 1440px;margin: auto;width: 100%;">
		<app-data-table style="width: fit-content;min-width: calc(100% - 32px);" [rows]="items" [trackBy]="'Count'" [(selectedRows)]="selectedItems" [showSpinner]="pageConfig.showSpinner" class="box-shadow ion-margin-horizontal" (activate)="onActive($event)">
			<datatable-column [checkbox]="true" name=""></datatable-column>
			<datatable-column class="col-id" name="#"></datatable-column>
			<datatable-column class="col-name" [sticky]="true" name="{{c.Property}}" [property]="c.Property" *ngFor="let c of reportConfig.DataConfig.CompareBy"></datatable-column>
			<datatable-column class="col-date" name="Interval" [property]="reportConfig.DataConfig.Interval.Title"></datatable-column>
			<datatable-column class="col-money" [class]="viewDimension == (m.Title || m.Property) ? 'selected':'' " name="{{(m.Title || m.Property)}}" [property]="m.Title || m.Property" *ngFor="let m of reportConfig.DataConfig.MeasureBy">
				<ng-template let-value="value" datatable-cell-template>
					{{ value | number}}
				</ng-template>
			</datatable-column>
			<datatable-column class="col-remark" name=""></datatable-column>
		</app-data-table>
	</div>

	<div class="ion-padding"></div>
</ion-content>